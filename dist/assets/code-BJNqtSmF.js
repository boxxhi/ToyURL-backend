import{r as a,h as f,i as w,c as u,o as p,b as r,d as C,t as v,g as b}from"./runtime-dom.esm-bundler-DqGBW4yU.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const g={class:"container"},U={class:"content"},k={key:0,class:"countdown"},B={class:"message"},I=["disabled"],E={__name:"CodeComponent",setup(N){const e=a("Por favor espera..."),c=a(!0),n=a(null),o=a(3);let t=null;const _=()=>{t=setInterval(()=>{o.value--,o.value<=0&&(clearInterval(t),c.value=!1,e.value="Listo para redirigir.")},1e3)};f(()=>{t&&clearInterval(t)}),w(async()=>{const s=window.location.pathname.match(/\/c\/(.+)/),l=s?s[1]:null;if(!l){e.value="URL invÃ¡lida";return}try{const d=await(await fetch("/api/lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l})})).json();d.redirectUrl?(n.value=d.redirectUrl,_()):e.value="URL no encontrada"}catch(i){e.value="Error al conectar con el servidor",console.error("Error:",i)}});const m=()=>{n.value&&(window.location.href=n.value)};return(h,s)=>(p(),u("div",g,[r("div",U,[o.value>0?(p(),u("p",k,v(o.value),1)):C("",!0),r("p",B,v(e.value),1),r("button",{onClick:m,disabled:c.value,class:"continue-button"}," Continuar ",8,I)])]))}},L=y(E,[["__scopeId","data-v-34b667d9"]]);b(L).mount("#code-app");
