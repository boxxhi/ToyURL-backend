import{r as n,c as p,o as v,b as s,d as g,w as c,v as m,t as f,F as k,g as C}from"./runtime-dom.esm-bundler-DqGBW4yU.js";import{_ as R}from"./logo-CxXS7KxG.js";const V={class:"container"},b={class:"form-opts"},q={class:"form"},E={key:0,class:"error"},I={key:1,class:"success"},M={__name:"RegisterComponent",setup(S){const l=n(""),t=n(""),i=n(""),a=n(""),u=n("");async function y(){if(l.value=="")return a.value="Introduce un email";if(t.value=="")return a.value="Introduce una contraseña";if(i.value=="")return a.value="Repite la contraseña";if(i.value!==t.value)return a.value="Las contraseñas no coinciden";try{const r=await fetch("/api/register",{method:"POST",body:JSON.stringify({email:l.value,password:t.value}),headers:{"Content-Type":"application/json"}});if(r.status>401)return a.value="Error interno. Por favor intente de nuevo";const e=await r.json();if(e.success){a.value="";const d=e.token;localStorage.setItem("token",d),u.value="Redirigiendo..."}else{const d={already_used:"El correo ya esta en uso"},w=e.message||"unknown";a.value=d[w]}}catch(r){a.value="Error al procesar la solicitud.",console.error(r.message)}}return(r,e)=>(v(),p(k,null,[e[9]||(e[9]=s("div",{class:"logo"},[s("img",{src:R,alt:"logo",height:"65px"})],-1)),s("div",V,[e[8]||(e[8]=s("div",{class:"register-info"},[s("h4",null,"Registrate para empezar"),s("a",{href:"/login.html"},"¿Ya tienes cuenta? Inicia sesion aquí")],-1)),s("div",b,[e[6]||(e[6]=s("a",{class:"google-btn"},"Continua con Google",-1)),e[7]||(e[7]=s("div",{class:"separator"},[s("div"),s("span",null,"O"),s("div")],-1)),s("div",q,[s("div",null,[e[3]||(e[3]=s("h3",null,"Correo",-1)),c(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),placeholder:"",required:"",id:"email"},null,512),[[m,l.value]])]),s("div",null,[e[4]||(e[4]=s("h3",null,"Contraseña",-1)),c(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=o=>t.value=o),placeholder:"",required:"",id:"password"},null,512),[[m,t.value]])]),s("div",null,[e[5]||(e[5]=s("h3",null,"Repita la contraseña",-1)),c(s("input",{type:"password","onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),placeholder:"",required:"",id:"password"},null,512),[[m,i.value]])]),a.value?(v(),p("div",E,f(a.value),1)):g("",!0),u.value?(v(),p("div",I,f(u.value),1)):g("",!0),s("button",{onClick:y},"Crear")])])])],64))}};C(M).mount("#register-app");
