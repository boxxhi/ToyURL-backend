import{r as l,c as d,o as c,b as s,d as v,w as p,v as m,t as g,F as k,g as y}from"./runtime-dom.esm-bundler-DqGBW4yU.js";import{_ as C}from"./logo-CxXS7KxG.js";const _={class:"container"},E={class:"form-opts"},I={class:"form"},b={key:0,class:"error"},h={key:1,class:"success"},x={__name:"LoginComponent",setup(M){const t=l(""),a=l(""),o=l(""),i=l("");async function f(){if(t.value=="")return o.value="Introduce un email";if(a.value=="")return o.value="Introduce una contraseña";try{const n=await fetch("/api/login",{method:"POST",body:JSON.stringify({email:t.value,password:a.value}),headers:{"Content-Type":"application/json"}});if(n.status==500){o.value="Error interno. Por favor intente de nuevo";return}const e=await n.json();if(e.success){o.value="";const u=e.token;localStorage.setItem("token",u),i.value="Redirigiendo..."}else{const u={invalid_password:"Contraseña incorrecta",email_not_found:"El correo no existe",unknown:"Error desconocido. Intente de nuevo"},w=e.message||"unknown";o.value=u[w]}}catch(n){o.value="Error al procesar la solicitud.",console.error(n.message)}}return(n,e)=>(c(),d(k,null,[e[7]||(e[7]=s("div",{class:"logo"},[s("img",{src:C,alt:"logo",height:"65px"})],-1)),s("div",_,[e[6]||(e[6]=s("div",{class:"register-info"},[s("h4",null,"Inicia sesión"),s("a",{href:"/register.html"},"¿No tienes cuenta? Registrate aquí")],-1)),s("div",E,[e[4]||(e[4]=s("a",{class:"google-btn"},"Continua con Google",-1)),e[5]||(e[5]=s("div",{class:"separator"},[s("div"),s("span",null,"O"),s("div")],-1)),s("div",I,[s("div",null,[e[2]||(e[2]=s("h3",null,"Correo",-1)),p(s("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=r=>t.value=r),placeholder:"",required:"",id:"email"},null,512),[[m,t.value]])]),s("div",null,[e[3]||(e[3]=s("h3",null,"Contraseña",-1)),p(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=r=>a.value=r),placeholder:"",required:"",id:"password"},null,512),[[m,a.value]])]),o.value?(c(),d("div",b,g(o.value),1)):v("",!0),i.value?(c(),d("div",h,g(i.value),1)):v("",!0),s("button",{onClick:f},"Entrar")])])])],64))}};y(x).mount("#login-app");
