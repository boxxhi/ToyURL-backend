import{_ as f,r as a,h as w,i as C,c as u,o as p,b as r,d as b,t as v,g as y}from"./_plugin-vue_export-helper-XqS31xz0.js";const g={class:"container"},U={class:"content"},k={key:0,class:"countdown"},B={class:"message"},I=["disabled"],E={__name:"CodeComponent",setup(N){const e=a("Por favor espera..."),c=a(!0),n=a(null),o=a(3);let t=null;const _=()=>{t=setInterval(()=>{o.value--,o.value<=0&&(clearInterval(t),c.value=!1,e.value="Listo para redirigir.")},1e3)};w(()=>{t&&clearInterval(t)}),C(async()=>{const s=window.location.pathname.match(/\/c\/(.+)/),l=s?s[1]:null;if(!l){e.value="URL invÃ¡lida";return}try{const d=await(await fetch("/api/lookup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:l})})).json();d.redirectUrl?(n.value=d.redirectUrl,_()):e.value="URL no encontrada"}catch(i){e.value="Error al conectar con el servidor",console.error("Error:",i)}});const h=()=>{n.value&&(window.location.href=n.value)};return(m,s)=>(p(),u("div",g,[r("div",U,[o.value>0?(p(),u("p",k,v(o.value),1)):b("",!0),r("p",B,v(e.value),1),r("button",{onClick:h,disabled:c.value,class:"continue-button"}," Continuar ",8,I)])]))}},L=f(E,[["__scopeId","data-v-34b667d9"]]);y(L).mount("#code-app");
